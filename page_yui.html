<html>
<head>

	<script type="text/javascript" src="http://yui.yahooapis.com/3.2.0/build/yui/yui-min.js"></script>
	<script type="text/javascript" src="yui/javascript/build/yuitest/yuitest-min.js"></script>
	<script type="text/javascript" src="yui/javascript/build/yuitest/yuitest-core.js"></script>
	<script type="text/javascript" src="yui/javascript/build/yuitest/yuitest.js"></script>

	<script type="text/javascript" src="button.js"></script>
	<script type="text/javascript" src="buttonYui.js"></script>


</head>
<body>
	
	Input: <input type="text" id="in"> <br>
	<button onclick="cl()">script</button> <br>
	<button onclick="dotest()">test</button> <br>

	<div id="div">
	</div>

	<div id="res">
	</div>

	<script type="text/javascript">
    var init = true;
	
	var dotest = function() { 

	 	YUI().use('test', function (Y) {

			// create web(!) console
		    // var r = new Y.Console({
		    //     newestOnTop : false,
		    //     style: 'block' // to anchor in the example content
		    // });
		    
		    // r.render('#testLogger');
		    
		 	var TestRunner = YUITest.TestRunner;
		 	// var TestRunner = Y.Test.Runner;
		 	if (init) {
			  	TestRunner.add(testCase);
		  	}

		    //function to handle events generated by the testrunner
		    function logEvent(event){
		        
		        //data variables
		        var message = "",
		            messageType = "";

		        switch(event.type){
		            case TestRunner.BEGIN_EVENT:
		                message = "Testing began at " + (new Date()).toString() + ".";
		                messageType = "info";
		                break;
		                
		            case TestRunner.COMPLETE_EVENT:
		                message = Y.substitute("Testing completed at " +
		                    (new Date()).toString() + ".\n" +
		                    "Passed:{passed} Failed:{failed} " +
		                    "Total:{total} ({ignored} ignored)",
		                    event.results);
		                messageType = "info";
		                break;
		                
		            case TestRunner.TEST_FAIL_EVENT:
		                message = event.testName + ": failed.\n" + event.error.getMessage();
		                messageType = "fail";
		                break;
		                
		            case TestRunner.TEST_IGNORE_EVENT:
		                message = event.testName + ": ignored.";
		                messageType = "ignore";
		                break;
		                
		            case TestRunner.TEST_PASS_EVENT:
		                message = event.testName + ": passed.";
		                messageType = "pass";
		                break;
		                
		            case TestRunner.TEST_SUITE_BEGIN_EVENT:
		                message = "Test suite \"" + event.testSuite.name + "\" started.";
		                messageType = "info";
		                break;
		                
		            case TestRunner.TEST_SUITE_COMPLETE_EVENT:
		                message = Y.substitute("Test suite \"" +
		                    event.testSuite.name + "\" completed" + ".\n" +
		                    "Passed:{passed} Failed:{failed} " +
		                    "Total:{total} ({ignored} ignored)",
		                    event.results);
		                messageType = "info";
		                break;
		                
		            case TestRunner.TEST_CASE_BEGIN_EVENT:
		                message = "Test case \"" + event.testCase.name + "\" started.";
		                messageType = "info";
		                break;
		                
		            case TestRunner.TEST_CASE_COMPLETE_EVENT:
		                message = Y.substitute("Test case \"" +
		                    event.testCase.name + "\" completed.\n" +
		                    "Passed:{passed} Failed:{failed} " +
		                    "Total:{total} ({ignored} ignored)",
		                    event.results);

		                var res = Y.substitute("{passed}/{failed}/{ignored}", event.results);
		                document.getElementById('div').innerHTML = res;
		                
		                messageType = "info";
		                break;
		            default:
		                message = "Unexpected event " + event.type;
		                message = "info";
		        }
		    
		        //only log if required
		        Y.log(message, messageType, "TestRunner");
		    }
		    
		    if (init) {
			    // listen for events to publish to the logger
			    // TestRunner.attach(TestRunner.BEGIN_EVENT, logEvent);
			    // TestRunner.attach(TestRunner.COMPLETE_EVENT, logEvent);
			    // TestRunner.attach(TestRunner.TEST_SUITE_BEGIN_EVENT, logEvent);
			    // TestRunner.attach(TestRunner.TEST_SUITE_COMPLETE_EVENT, logEvent);
			    TestRunner.subscribe(TestRunner.TEST_CASE_BEGIN_EVENT, logEvent);
			    TestRunner.subscribe(TestRunner.TEST_CASE_COMPLETE_EVENT, logEvent);
			    TestRunner.subscribe(TestRunner.TEST_PASS_EVENT, logEvent);
			    TestRunner.subscribe(TestRunner.TEST_FAIL_EVENT, logEvent);
			    TestRunner.subscribe(TestRunner.TEST_IGNORE_EVENT, logEvent);
		    }
		    
		    //run the tests
		    TestRunner.run();

		    init = false;
		});

	}
  	</script>

</body>
</html>